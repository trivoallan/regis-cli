{% import theme ~ "/macros.html" as m with context %}
{% set data = report.results.get('scorecarddev', {}) %}
{% set options = w.options | default({}) %}

{% if data and data.scorecard_available and data.checks %}
    <div class="overflow-auto">
        <table class="striped">
            <thead>
                <tr>
                    <th>Check</th>
                    <th>Score</th>
                    <th>Reason</th>
                </tr>
            </thead>
            <tbody>
                {% for c in data.checks|sort(attribute="score") %}
                <tr>
                    <td><strong>{{ c.name|e }}</strong></td>
                    <td>
                        {% if c.score == -1 %}
                            <span style="opacity: 0.5;">N/A</span>
                        {% elif c.score >= 7 %}
                            {{ m.badge(c.score ~ "/10", status="success") }}
                        {% elif c.score >= 4 %}
                            {{ m.badge(c.score ~ "/10", status="warning") }}
                        {% else %}
                            {{ m.badge(c.score ~ "/10", status="error") }}
                        {% endif %}
                    </td>
                    <td><small>{{ c.reason|e }}</small></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% elif not data.scorecard_available %}
    <p>⚠️ OpenSSF Scorecard data unavailable for this image.</p>
{% endif %}
