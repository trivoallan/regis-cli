{% import theme ~ "/macros.html" as m %}

{% call m.section("End-of-Life", "ðŸ“…") %}
    {% if not data.product_found %}
        <p class="text-muted">Product not found on endoflife.date.</p>
    {% else %}
        <div class="flex-gap" style="margin-bottom: 12px;">
            {% if data.is_eol %}
                {{ m.badge("EOL", "Yes", "#ef4444") }}
            {% elif data.is_eol is sameas false %}
                {{ m.badge("Supported", "Yes", "#22c55e") }}
            {% else %}
                {{ m.badge("Unknown", "â€”", "#6b7280") }}
            {% endif %}
        </div>

        {% if data.matched_cycle %}
            <table>
                <thead>
                    <tr>
                        <th>Cycle</th>
                        <th>Release</th>
                        <th>EOL</th>
                        <th>Latest</th>
                        <th>LTS</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{ data.matched_cycle.cycle|e }}</td>
                        <td>{{ data.matched_cycle.release_date|e }}</td>
                        <td>{{ data.matched_cycle.eol|e }}</td>
                        <td>{{ data.matched_cycle.latest|e }}</td>
                        <td>{{ m.bool_icon(data.matched_cycle.lts) }}</td>
                    </tr>
                </tbody>
            </table>
        {% endif %}
        
        <div class="flex-gap" style="margin-top: 12px;">
            {{ m.badge('Active cycles', data.active_cycles_count|default('?'), '#22c55e') }}
            {{ m.badge('EOL cycles', data.eol_cycles_count|default('?'), '#ef4444') }}
        </div>
    {% endif %}
{% endcall %}
